import i18n from "i18next";
import { initReactI18next } from "react-i18next";

const LOCAL_STORAGE_LANGUAGE_KEY = "envshelf:language";

export const supportedLanguages = ["en", "es", "pt-BR", "ja", "de"] as const;
export type Language = (typeof supportedLanguages)[number];

const resources = {
  en: {
    translation: {
      appTitle: "Env-shelf",
      appSubtitle: "Local .env manager with safe edits.",
      emptyStateDescription:
        "Choose a folder to find and edit your .env files.",
      settings: "Settings",
      settingsTitle: "Settings",
      settingsDescription: "Customize how Env-shelf looks and behaves.",
      language: "Language",
      english: "English",
      spanish: "Spanish",
      portugueseBrazil: "Portuguese (Brazil)",
      japanese: "Japanese",
      german: "German",
      languageNote: "You can change language anytime.",
      privacy: "Privacy",
      showValues: "Show values",
      backup: "Backup on save",
      projectData: "Project data",
      forgetFolder: "Forget saved folder",
      forgetFolderHint:
        "Clear the remembered path and go back to the folder picker.",
      selectFolder: "Select folder",
      selectedFolderToast: "Folder selected",
      scanErrorToast: "Scan failed",
      scanSuccessToast: "Scan complete",
      scanEmptyToast: "No .env files found",
      scanSuccessDescription: "Found {{count}} project(s).",
      cancelScan: "Cancel scan",
      scanning: "Scanning...",
      projects: "Projects",
      noGroupSelected: "No group selected",
      envFiles: "Env files",
      variables: "Variables",
      revert: "Revert",
      save: "Save",
      duplicateKeys: "Duplicate keys detected: {{keys}}",
      table: "Table",
      raw: "Raw",
      diff: "Diff",
      searchByKey: "Search by key",
      addVariable: "Add variable",
      keyCannotBeEmpty: "Key cannot be empty.",
      noChangesYet: "No changes yet.",
      added: "Added: {{after}}",
      removed: "Removed: {{before}}",
      updated: "{{before}} -> {{after}}",
      fileSavedStatus: "File saved.",
      noChangesToSaveToast: "No changes to save",
      fileSavedToast: "File saved",
      fileSaveErrorToast: "Save failed",
      fileSavedDescription:
        "Added: {{added}}, Updated: {{updated}}, Removed: {{removed}}{{backup}}",
      fileSavedWithBackupSuffix: " (with backup).",
      fileSavedWithoutBackupSuffix: ".",
      diffAdded: "added",
      diffUpdated: "updated",
      diffRemoved: "removed",
      close: "Close",
    },
  },
  es: {
    translation: {
      appTitle: "Env-shelf",
      appSubtitle: "Administrador local de .env con ediciones seguras.",
      emptyStateDescription:
        "Elige una carpeta para encontrar y editar tus archivos .env.",
      settings: "Configuracion",
      settingsTitle: "Configuracion",
      settingsDescription: "Personaliza como se ve y funciona Env-shelf.",
      language: "Idioma",
      english: "Ingles",
      spanish: "Espanol",
      portugueseBrazil: "Portugues (Brasil)",
      japanese: "Japones",
      german: "Aleman",
      languageNote: "Puedes cambiar el idioma en cualquier momento.",
      privacy: "Privacidad",
      showValues: "Mostrar valores",
      backup: "Respaldo al guardar",
      projectData: "Datos del proyecto",
      forgetFolder: "Olvidar carpeta guardada",
      forgetFolderHint:
        "Limpia la ruta recordada y vuelve al selector de carpetas.",
      selectFolder: "Seleccionar carpeta",
      selectedFolderToast: "Carpeta seleccionada",
      scanErrorToast: "Escaneo fallido",
      scanSuccessToast: "Escaneo completo",
      scanEmptyToast: "No se encontraron archivos .env",
      scanSuccessDescription: "Se encontraron {{count}} proyecto(s).",
      cancelScan: "Cancelar escaneo",
      scanning: "Escaneando...",
      projects: "Proyectos",
      noGroupSelected: "Ningun grupo seleccionado",
      envFiles: "Archivos env",
      variables: "Variables",
      revert: "Revertir",
      save: "Guardar",
      duplicateKeys: "Claves duplicadas detectadas: {{keys}}",
      table: "Tabla",
      raw: "Crudo",
      diff: "Diff",
      searchByKey: "Buscar por clave",
      addVariable: "Agregar variable",
      keyCannotBeEmpty: "La clave no puede estar vacia.",
      noChangesYet: "Sin cambios todavia.",
      added: "Agregado: {{after}}",
      removed: "Eliminado: {{before}}",
      updated: "{{before}} -> {{after}}",
      fileSavedStatus: "Archivo guardado.",
      noChangesToSaveToast: "No hay cambios para guardar",
      fileSavedToast: "Archivo guardado",
      fileSaveErrorToast: "Error al guardar",
      fileSavedDescription:
        "Agregados: {{added}}, Actualizados: {{updated}}, Eliminados: {{removed}}{{backup}}",
      fileSavedWithBackupSuffix: " (con respaldo).",
      fileSavedWithoutBackupSuffix: ".",
      diffAdded: "agregado",
      diffUpdated: "actualizado",
      diffRemoved: "eliminado",
      close: "Cerrar",
    },
  },
  "pt-BR": {
    translation: {
      appTitle: "Env-shelf",
      appSubtitle: "Gerenciador local de .env com edicoes seguras.",
      emptyStateDescription:
        "Escolha uma pasta para encontrar e editar seus arquivos .env.",
      settings: "Configuracoes",
      settingsTitle: "Configuracoes",
      settingsDescription: "Personalize como o Env-shelf aparece e funciona.",
      language: "Idioma",
      english: "Ingles",
      spanish: "Espanhol",
      portugueseBrazil: "Portugues (Brasil)",
      japanese: "Japones",
      german: "Alemao",
      languageNote: "Voce pode mudar o idioma a qualquer momento.",
      privacy: "Privacidade",
      showValues: "Mostrar valores",
      backup: "Backup ao salvar",
      projectData: "Dados do projeto",
      forgetFolder: "Esquecer pasta salva",
      forgetFolderHint:
        "Limpe o caminho salvo e volte para o seletor de pastas.",
      selectFolder: "Selecionar pasta",
      selectedFolderToast: "Pasta selecionada",
      scanErrorToast: "Falha na varredura",
      scanSuccessToast: "Varredura concluida",
      scanEmptyToast: "Nenhum arquivo .env encontrado",
      scanSuccessDescription: "{{count}} projeto(s) encontrado(s).",
      cancelScan: "Cancelar varredura",
      scanning: "Varrendo...",
      projects: "Projetos",
      noGroupSelected: "Nenhum grupo selecionado",
      envFiles: "Arquivos env",
      variables: "Variaveis",
      revert: "Reverter",
      save: "Salvar",
      duplicateKeys: "Chaves duplicadas detectadas: {{keys}}",
      table: "Tabela",
      raw: "Bruto",
      diff: "Diff",
      searchByKey: "Buscar por chave",
      addVariable: "Adicionar variavel",
      keyCannotBeEmpty: "A chave nao pode estar vazia.",
      noChangesYet: "Ainda sem alteracoes.",
      added: "Adicionado: {{after}}",
      removed: "Removido: {{before}}",
      updated: "{{before}} -> {{after}}",
      fileSavedStatus: "Arquivo salvo.",
      noChangesToSaveToast: "Nao ha alteracoes para salvar",
      fileSavedToast: "Arquivo salvo",
      fileSaveErrorToast: "Falha ao salvar",
      fileSavedDescription:
        "Adicionados: {{added}}, Atualizados: {{updated}}, Removidos: {{removed}}{{backup}}",
      fileSavedWithBackupSuffix: " (com backup).",
      fileSavedWithoutBackupSuffix: ".",
      diffAdded: "adicionado",
      diffUpdated: "atualizado",
      diffRemoved: "removido",
      close: "Fechar",
    },
  },
  ja: {
    translation: {
      appTitle: "Env-shelf",
      appSubtitle: ".env を安全に編集できるローカルマネージャー。",
      emptyStateDescription:
        "フォルダーを選択して .env ファイルを検索・編集します。",
      settings: "設定",
      settingsTitle: "設定",
      settingsDescription: "Env-shelf の表示と動作をカスタマイズします。",
      language: "言語",
      english: "英語",
      spanish: "スペイン語",
      portugueseBrazil: "ポルトガル語 (ブラジル)",
      japanese: "日本語",
      german: "ドイツ語",
      languageNote: "言語はいつでも変更できます。",
      privacy: "プライバシー",
      showValues: "値を表示",
      backup: "保存時にバックアップ",
      projectData: "プロジェクトデータ",
      forgetFolder: "保存済みフォルダーを削除",
      forgetFolderHint: "記憶されたパスを消去してフォルダー選択に戻ります。",
      selectFolder: "フォルダーを選択",
      selectedFolderToast: "フォルダーを選択しました",
      scanErrorToast: "スキャンに失敗しました",
      scanSuccessToast: "スキャン完了",
      scanEmptyToast: ".env ファイルが見つかりませんでした",
      scanSuccessDescription: "{{count}} 件のプロジェクトが見つかりました。",
      cancelScan: "スキャンをキャンセル",
      scanning: "スキャン中...",
      projects: "プロジェクト",
      noGroupSelected: "グループが選択されていません",
      envFiles: "Env ファイル",
      variables: "変数",
      revert: "元に戻す",
      save: "保存",
      duplicateKeys: "重複キーを検出: {{keys}}",
      table: "テーブル",
      raw: "Raw",
      diff: "差分",
      searchByKey: "キーで検索",
      addVariable: "変数を追加",
      keyCannotBeEmpty: "キーは空にできません。",
      noChangesYet: "まだ変更はありません。",
      added: "追加: {{after}}",
      removed: "削除: {{before}}",
      updated: "{{before}} -> {{after}}",
      fileSavedStatus: "ファイルを保存しました。",
      noChangesToSaveToast: "保存する変更がありません",
      fileSavedToast: "ファイルを保存しました",
      fileSaveErrorToast: "保存に失敗しました",
      fileSavedDescription:
        "追加: {{added}}, 更新: {{updated}}, 削除: {{removed}}{{backup}}",
      fileSavedWithBackupSuffix: " (バックアップあり)。",
      fileSavedWithoutBackupSuffix: "。",
      diffAdded: "追加",
      diffUpdated: "更新",
      diffRemoved: "削除",
      close: "閉じる",
    },
  },
  de: {
    translation: {
      appTitle: "Env-shelf",
      appSubtitle: "Lokaler .env-Manager mit sicheren Bearbeitungen.",
      emptyStateDescription:
        "Ordner auswahlen, um .env-Dateien zu finden und zu bearbeiten.",
      settings: "Einstellungen",
      settingsTitle: "Einstellungen",
      settingsDescription: "Passe Aussehen und Verhalten von Env-shelf an.",
      language: "Sprache",
      english: "Englisch",
      spanish: "Spanisch",
      portugueseBrazil: "Portugiesisch (Brasilien)",
      japanese: "Japanisch",
      german: "Deutsch",
      languageNote: "Du kannst die Sprache jederzeit andern.",
      privacy: "Datenschutz",
      showValues: "Werte anzeigen",
      backup: "Backup beim Speichern",
      projectData: "Projektdaten",
      forgetFolder: "Gespeicherten Ordner vergessen",
      forgetFolderHint:
        "Gespeicherten Pfad loschen und zum Ordnerauswahler zuruckkehren.",
      selectFolder: "Ordner auswahlen",
      selectedFolderToast: "Ordner ausgewahlt",
      scanErrorToast: "Scan fehlgeschlagen",
      scanSuccessToast: "Scan abgeschlossen",
      scanEmptyToast: "Keine .env-Dateien gefunden",
      scanSuccessDescription: "{{count}} Projekt(e) gefunden.",
      cancelScan: "Scan abbrechen",
      scanning: "Scanne...",
      projects: "Projekte",
      noGroupSelected: "Keine Gruppe ausgewahlt",
      envFiles: "Env-Dateien",
      variables: "Variablen",
      revert: "Zurucksetzen",
      save: "Speichern",
      duplicateKeys: "Doppelte Schlussel gefunden: {{keys}}",
      table: "Tabelle",
      raw: "Roh",
      diff: "Diff",
      searchByKey: "Nach Schlussel suchen",
      addVariable: "Variable hinzufugen",
      keyCannotBeEmpty: "Schlussel darf nicht leer sein.",
      noChangesYet: "Noch keine Anderungen.",
      added: "Hinzugefugt: {{after}}",
      removed: "Entfernt: {{before}}",
      updated: "{{before}} -> {{after}}",
      fileSavedStatus: "Datei gespeichert.",
      noChangesToSaveToast: "Keine Anderungen zum Speichern",
      fileSavedToast: "Datei gespeichert",
      fileSaveErrorToast: "Speichern fehlgeschlagen",
      fileSavedDescription:
        "Hinzugefugt: {{added}}, Aktualisiert: {{updated}}, Entfernt: {{removed}}{{backup}}",
      fileSavedWithBackupSuffix: " (mit Backup).",
      fileSavedWithoutBackupSuffix: ".",
      diffAdded: "hinzugefugt",
      diffUpdated: "aktualisiert",
      diffRemoved: "entfernt",
      close: "Schliessen",
    },
  },
} as const;

const isSupportedLanguage = (value: string | null): value is Language =>
  value !== null && supportedLanguages.includes(value as Language);

const storedLanguage = localStorage.getItem(LOCAL_STORAGE_LANGUAGE_KEY);
const initialLanguage: Language = isSupportedLanguage(storedLanguage)
  ? storedLanguage
  : "en";

void i18n.use(initReactI18next).init({
  resources,
  lng: initialLanguage,
  fallbackLng: "en",
  interpolation: {
    escapeValue: false,
  },
});

export { LOCAL_STORAGE_LANGUAGE_KEY };
export default i18n;
